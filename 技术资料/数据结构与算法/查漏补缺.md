# 查漏补缺

### Java基础

1. 自动拆装箱那块，int和Integer的区别，
2. JMM Java 内存模型
3. JVM和JDK，JRE，JMM的辨识
4. Java8 内存模型做了哪些改进？
5. 使用过哪些数据库连接池，有什么优缺点 ✅
6. 注解和反射不是一回事！看一下Java注解那块可以 



### 项目改造

三台Tomcat服务器 每一个都是独立的进程，服务管理平台，流程管理平台，微服务的框架，我负责的是数据生产平台的主要页面，一个是主页面，再一个就是生产任务新建页面，数据生产平台主要是将服务和流程组合起来形成数据生产任务，并监控数据生产任务的完成情况。所以重点一个是查，一个是监控,

查这方面首先是两种ORM框架嘛 Spring Data JPA对Hibernate进行了进一步封装，基本看不到SQL语句，大大减少了样式代码，就是灵活性上不如Mybatis，因为我们项目做了分库，所以主要靠接口去，没有那么多复杂查询，所以采用了JPA是我们项目主要选择的，在查上一个是要做分页，这里是个多条件分页查询所以重写了，分页其实实现原理很简单，熟悉SQL的执行机制就知道 是选出来后Limit限定行数，得到分页结果的。

spectification这个接口的toPredicate方法，其实就是填充关键信息，自动生成sql语句，其中分页用limit来实现，一开始没有做并发的测试，用postman对接口做测试后，发现sql语句的时间还是很慢，所以说在老师查和写是两个页面分开的，并且只能查当前用户的，所以想着引入缓存redis，考虑到数据一致性问题，采用了先更新数据库再删除缓存的方式，除非写入比读取快才会出现（即 读 在写前，写先完成了，读后完成）写会加排他锁，读是共享锁，所以不用担心，当然还有一种就是expire设置过期时间的方法，但是要考虑到业务时间，目前还没有测试。

这事查询这块，主要做两个工作，一是分页，二是缓存

服务或者流程完成了，要更新生产任务平台的任务状况，比如pause啊，wrong啊，finish等状态

然后就是监控，这其实是个进程间通信的问题，一开始我是想用Redis的list做简单的消息队列，然后单独开一个线程每隔1s去redis中取一次，其实就是进程通信中的共享数据区的思想，Redis单线程的，天然线程安全，所以不用考虑共享数据区中的安全问题



### 线程并发

1. 多线程中的i++线程安全吗？为什么？

线程不安全，因为i++不是一个原子操作，在JMM中 赋值和读取是原子操作，其他都不是，原子操作的组合并不一定是原子操作，比如举个例子，两个数

2. 如何线程安全的实现一个计数器？

synchronzied 同步代码块，对该对象进行加锁，或者使用lock ReentLock 加排他锁

3. 多线程同步的方法

选择内存模型无非就是共享内存模型和消息传递模型，两个模型

同步的概念，最关键的是 共享和互斥

- 第一个就是加锁 

- 然后volatile变量，但是不保证原子性 

4. 介绍一下生产者消费者模式？

进程同步的经典模型，用一个互斥信号量和两个同步信号量进行消息传递，类似于java 中的semaphore 类和countdownlatch，规定了最大数量，然后在生产者和消费者间相当于有一个缓冲区，

Semaphore和countdownlatch可以脱离锁 单独使用，锁是保持互斥的，而这两个是保持同步的

5. 线程，进程，然后线程创建有很大开销，怎么优化？

使用线程池，java中的线程池

6. 线程池运行流程，参数，策略

   创建线程池的策略，cached，fix，single，schedule线程池

7. 讲一下AQS吧。

8. 创建线程的方法，哪个更好，为什么？

9. Java中有几种方式启动一个线程？

10. Java中有几种线程池？

    5种线程池，有一种worksteal线程池 用work-steal的算法

11. 接口中的都是抽象方法，都需要自己实现，也就是说 也都是加了Abstract类的 Abstract类 需要继承重写，不能实例化

12. CMS 收集器 和 G1的区别，为什么永生代满了建议用 CMS 收集器

13. cyclicbarrier和countdownlatch的区别
14. 如何java多线程的回调方法？

15. 创建线程有几种不同的方式？你喜欢哪一种？为什么？

16. 概括的解释下线程的几种可用状态。

17. 同步方法和同步代码块的区别是什么？

18. 启动线程有哪几种方式，线程池有哪几种？

​		两种方式启动线程 run和start？ 线程池有5种

19. 在监视器(Monitor)内部，是如何做线程同步的？程序应该做哪种级别的同步？

​		一个等待区 一个排队阻塞区  中间小黑屋执行线程内容 程序应该做哪种级别的同步？线程同步啊

20. sleep() 和 wait() yield方法各有什么区别？⚠️

​		sleep

21. 同步和异步有何异同，在什么情况下分别使用他们？举例说明。

    同步 如果是一个同步方法，我程序就会一直执行，异步就是当前线程执行，传递过方法后就会结束不会一直等待结果的返回。

22. 



### Spring查漏补缺



