# 查漏补缺

### Java基础

1. 自动拆装箱那块，int和Integer的区别，
2. JMM Java 内存模型
3. JVM和JDK，JRE，JMM的辨识
4. Java8 内存模型做了哪些改进？
5. 使用过哪些数据库连接池，有什么优缺点 ✅
6. 注解和反射不是一回事！看一下Java注解那块可以 





### 项目改造

先自我介绍一下：

我先花一分钟说一下我本人的情况，然后详细说说一个项目。

我是程浩宇，是武大大三的一名学生，在过去两年半的学习里，我有着还不错的GPA，也获得过奖学金，有过一段海外交流，有较良好的沟通表达能力和商业意识，在自己负责的大创项目里，完成了从业务需求分析，功能非功能分析，数据库设计和模块设计等模块并上手开发，知晓基本的软件设计理论，了解常见的软件设计模式。同时积极参与实验室老师项目，有一段暑期科研经历，和一段三个多月的大型软件研发经历。并且在老师的指导下，与同学合作开发了校园卡在线识别平台，目前在导师领导下在申软件著作权。

针对我所应聘的岗位而言，我主要介绍一下地面信息开放平台，也就是那三个多月的大型软件开发经历，后面这个项目是7-8人的团队，在导师的领导下集中协作开发完成的，并且我经历了这个项目从demo到可以部署发布第一个版本的全体流程，这个项目从一开始设计的时候就是三个平台，服务管理平台，流程管理平台和数据生产平台，数据生产平台主要是将服务和流程组合起来形成数据生产任务，并监控数据生产任务的完成情况，我主要负责数据生产平台的主界面和创建界面，所以重点一个是对数据生产任务的创建和查询，另一个就是监控运行状态，

最开始的demo阶段，三个平台也就是三个tomcat进程是共用一个数据库的，但是很快就遇到了慢查询的问题，SQL执行缓慢，于是在老师指导下做了分库设计，不同的数据库之间的资源用API进行访问

Spring是单例的，但是单例也可以有很好的并发性能，比如redis，所以用Spring用threadlocal来解决线程安全问题，每一个线程都保留一个资源的副本，这样就减少了创建销毁资源的时间，同时也解决了竞争共享资源的问题，现在人人都有了，比如每一个threadlocal都保存一个



三台Tomcat服务器 每一个都是独立的进程，服务管理平台，流程管理平台，微服务的框架，我负责的是数据生产平台的主要页面，一个是主页面，再一个就是生产任务新建页面，数据生产平台主要是将服务和流程组合起来形成数据生产任务，并监控数据生产任务的完成情况。所以重点一个是查，一个是监控,

bean都是单实例的，

一开始没有做并发的测试，用postman对接口做测试后，发现sql语句的时间还是很慢，所以说在老师查和写是两个页面分开的，并且只能查当前用户的，所以想着引入缓存redis，考虑到数据一致性问题，采用了先更新数据库再删除缓存的方式，除非写入比读取快才会出现（即 读 在写前，写先完成了，读后完成）写会加排他锁，读是共享锁，所以不用担心，当然还有一种就是expire设置过期时间的方法，但是要考虑到业务时间，目前还没有测试。

这事查询这块，主要做两个工作，一是分页，二是缓存

服务或者流程完成了，要更新生产任务平台的任务状况，比如pause啊，wrong啊，finish等状态

然后就是监控，这其实是个进程间通信的问题，一开始我是想用Redis的list做简单的消息队列，然后单独开一个线程每隔1s去redis中取一次，其实就是进程通信中的共享数据区的思想，Redis单线程的，天然线程安全，所以不用考虑共享数据区中的安全问题



### 线程并发

1. 多线程中的i++线程安全吗？为什么？

线程不安全，因为i++不是一个原子操作，在JMM中 赋值和读取是原子操作，其他都不是，原子操作的组合并不一定是原子操作，比如举个例子，两个数

2. 如何线程安全的实现一个计数器？

synchronzied 同步代码块，对该对象进行加锁，或者使用lock ReentLock 加排他锁

3. 多线程同步的方法

选择内存模型无非就是共享内存模型和消息传递模型，两个模型

同步的概念，最关键的是 共享和互斥

- 第一个就是加锁 

- 然后volatile变量，但是不保证原子性 

4. 介绍一下生产者消费者模式？

进程同步的经典模型，用一个互斥信号量和两个同步信号量进行消息传递，类似于java 中的semaphore 类和countdownlatch，规定了最大数量，然后在生产者和消费者间相当于有一个缓冲区，

Semaphore和countdownlatch可以脱离锁 单独使用，锁是保持互斥的，而这两个是保持同步的

5. 线程，进程，然后线程创建有很大开销，怎么优化？

使用线程池，java中的线程池

6. 线程池运行流程，参数，策略

   创建线程池的策略，cached，fix，single，schedule线程池

7. 讲一下AQS吧。

8. 创建线程的方法，哪个更好，为什么？

9. Java中有几种方式启动一个线程？

10. Java中有几种线程池？

    5种线程池，有一种worksteal线程池 用work-steal的算法

11. 接口中的都是抽象方法，都需要自己实现，也就是说 也都是加了Abstract类的 Abstract类 需要继承重写，不能实例化

12. CMS 收集器 和 G1的区别，为什么永生代满了建议用 CMS 收集器

13. cyclicbarrier和countdownlatch的区别
14. 如何java多线程的回调方法？

15. 创建线程有几种不同的方式？你喜欢哪一种？为什么？

16. 概括的解释下线程的几种可用状态。

17. 同步方法和同步代码块的区别是什么？

18. 启动线程有哪几种方式，线程池有哪几种？

​		两种方式启动线程 run和start？ 线程池有5种

19. 在监视器(Monitor)内部，是如何做线程同步的？程序应该做哪种级别的同步？

​		一个等待区 一个排队阻塞区  中间小黑屋执行线程内容 程序应该做哪种级别的同步？线程同步啊

20. sleep() 和 wait() yield方法各有什么区别？⚠️

​		sleep

21. 同步和异步有何异同，在什么情况下分别使用他们？举例说明。

    同步 如果是一个同步方法，我程序就会一直执行，异步就是当前线程执行，传递过方法后就会结束不会一直等待结果的返回。

22. 



### Spring查漏补缺



